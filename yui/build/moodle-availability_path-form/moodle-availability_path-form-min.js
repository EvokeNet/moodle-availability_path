YUI.add("moodle-availability_path-form",function(p,e){M.availability_path=M.availability_path||{},M.availability_path.form=p.Object(M.core_availability.plugin),M.availability_path.form.initInner=function(e){this.cms=e},M.availability_path.form.getNode=function(e){for(var a,t,i,l,n='<span class="col-form-label pr-3"> '+M.util.get_string("title","availability_path")+'</span> <span class="availability-group form-group"><label><span class="sr-only">'+M.util.get_string("label_cm","availability_path")+'</span><select class="custom-select" name="cm" title="'+M.util.get_string("label_cm","availability_path")+'"><option value="0">'+M.util.get_string("choosedots","moodle")+"</option>",o=0;o<this.cms.length;o++)n+='<option value="'+(a=this.cms[o]).id+'">'+a.name+"</option>";return n+=' </select></label><label><span class="sr-only">'+M.util.get_string("label_option","availability_path")+'</span><select name="o" class="custom-select"><option value="0">'+M.util.get_string("choosedots","moodle")+"</option>",t=p.Node.create('<span class="form-inline">'+(n+="</select></label></span>")+"</span>"),i=function(n,o,s){var c,e=n.get("value"),t=M.cfg.wwwroot+"/availability/condition/path/ajax.php?cmid="+e;o.all("option").each(function(e){""!==e.get("value")&&e.remove()},this),e&&(n.set("disabled",!0),c={},M.util.js_pending(c),p.io(t,{on:{success:function(e,a){for(var t,i=p.JSON.parse(a.responseText),l=0;l<i.length;l++)(t=document.createElement("option")).value=i[l].id,t.innerHTML=i[l].title,o.append(t);n.set("disabled",!1),s!==undefined&&s(),M.core_availability.form.update(),M.util.js_complete(c)},failure:function(e,a){n.set("disabled",!1),M.util.js_complete(c);a=a.statusText;M.cfg.developerdebug&&(a+=" ("+t+")"),new M.core.exception({message:a})}}}))},e.cm!==undefined&&t.one("select[name=cm] > option[value="+e.cm+"]")&&(t.one("select[name=cm]").set("value",""+e.cm),i(t.one("select[name=cm]"),t.one("select[name=o]"),function(){e.o!==undefined&&t.one("select[name=o] > option[value="+e.o+"]")&&t.one("select[name=o]").set("value",""+e.o)})),M.availability_path.form.addedEvents||(M.availability_path.form.addedEvents=!0,(l=p.one(".availability-field")).delegate("change",function(){M.core_availability.form.update()},".availability_path select"),l.delegate("change",function(){var e=this.ancestor("span.availability_path"),a=e.one("select[name=cm]"),e=e.one("select[name=o]");i(a,e)},".availability_path select[name=cm]")),t},M.availability_path.form.fillValue=function(e,a){e.cm=parseInt(a.one("select[name=cm]").get("value"),10),e.o=parseInt(a.one("select[name=o]").get("value"),10)},M.availability_path.form.fillErrors=function(e,a){var t=parseInt(a.one("select[name=cm]").get("value"),10);0===t&&e.push("availability_path:error_selectcmid"),0===parseInt(a.one("select[name=o]").get("value"),10)&&e.push("availability_path:error_selectoptionid")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});